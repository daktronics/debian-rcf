#!/usr/bin/make -f
#DH_VERBOSE = 1
DPKG_EXPORT_BUILDFLAGS = 1
include /usr/share/dpkg/default.mk


# main packaging script based on dh7 syntax
%:
	dh $@ 

override_dh_auto_build:
	$(CXX) -std=c++11 -DRCF_USE_OPENSSL -DRCF_USE_ZLIB -DRCF_USE_PROTOBUF -DRCF_USE_IPV6 -DRCF_BUILD_DLL -g -fPIC -DPIC -c src/RCF/RCF.cpp -o src/RCF/RCF.o
	$(CXX) -shared -Wl,-soname,librcf2.so.2 src/RCF/RCF.o -lpthread -ldl -o librcf2.so.2.0.1
	ln -f -s librcf2.so.2.0.1  librcf2.so.2
	ln -f -s librcf2.so.2  librcf2.so
